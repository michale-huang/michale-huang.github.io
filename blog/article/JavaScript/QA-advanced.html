<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å‰ç«¯è¿›é˜¶é—®é¢˜ ğŸ’¥ | hh`s blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="ä¸€æ­¥ä¸€ä¸ªè„šå°">
    <link rel="preload" href="/blog/assets/css/0.styles.56a09861.css" as="style"><link rel="preload" href="/blog/assets/js/app.c630634d.js" as="script"><link rel="preload" href="/blog/assets/js/2.0a87b090.js" as="script"><link rel="preload" href="/blog/assets/js/11.6ddcf7ce.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b7429613.js"><link rel="prefetch" href="/blog/assets/js/12.fcdc44f2.js"><link rel="prefetch" href="/blog/assets/js/13.3893eff1.js"><link rel="prefetch" href="/blog/assets/js/14.37002dbc.js"><link rel="prefetch" href="/blog/assets/js/15.93f700e5.js"><link rel="prefetch" href="/blog/assets/js/16.c72526c6.js"><link rel="prefetch" href="/blog/assets/js/17.ca5e7662.js"><link rel="prefetch" href="/blog/assets/js/18.aae5d8f9.js"><link rel="prefetch" href="/blog/assets/js/19.14e0e4c2.js"><link rel="prefetch" href="/blog/assets/js/20.813154b6.js"><link rel="prefetch" href="/blog/assets/js/21.db264696.js"><link rel="prefetch" href="/blog/assets/js/22.9028fda3.js"><link rel="prefetch" href="/blog/assets/js/23.c18e7bf8.js"><link rel="prefetch" href="/blog/assets/js/24.74736046.js"><link rel="prefetch" href="/blog/assets/js/25.410e5118.js"><link rel="prefetch" href="/blog/assets/js/26.f27509dd.js"><link rel="prefetch" href="/blog/assets/js/27.8d9d5e13.js"><link rel="prefetch" href="/blog/assets/js/28.37e83d8a.js"><link rel="prefetch" href="/blog/assets/js/29.ca503c71.js"><link rel="prefetch" href="/blog/assets/js/3.5871bd1c.js"><link rel="prefetch" href="/blog/assets/js/30.3207ad90.js"><link rel="prefetch" href="/blog/assets/js/31.171174c7.js"><link rel="prefetch" href="/blog/assets/js/32.2ff6bde1.js"><link rel="prefetch" href="/blog/assets/js/33.7e088642.js"><link rel="prefetch" href="/blog/assets/js/34.46ff2d58.js"><link rel="prefetch" href="/blog/assets/js/35.509e0e67.js"><link rel="prefetch" href="/blog/assets/js/36.9d199e60.js"><link rel="prefetch" href="/blog/assets/js/37.e88f6e82.js"><link rel="prefetch" href="/blog/assets/js/38.e11ed3fb.js"><link rel="prefetch" href="/blog/assets/js/39.ef512e83.js"><link rel="prefetch" href="/blog/assets/js/4.4bb0c771.js"><link rel="prefetch" href="/blog/assets/js/40.3580e053.js"><link rel="prefetch" href="/blog/assets/js/41.0414e04c.js"><link rel="prefetch" href="/blog/assets/js/42.d5fdeb3f.js"><link rel="prefetch" href="/blog/assets/js/43.1833bedf.js"><link rel="prefetch" href="/blog/assets/js/44.658b8cc0.js"><link rel="prefetch" href="/blog/assets/js/45.4704d419.js"><link rel="prefetch" href="/blog/assets/js/46.5ce886e3.js"><link rel="prefetch" href="/blog/assets/js/47.7377e5b1.js"><link rel="prefetch" href="/blog/assets/js/48.05e42a53.js"><link rel="prefetch" href="/blog/assets/js/49.734849a8.js"><link rel="prefetch" href="/blog/assets/js/5.9160080f.js"><link rel="prefetch" href="/blog/assets/js/50.951f7df4.js"><link rel="prefetch" href="/blog/assets/js/6.a8c51ebe.js"><link rel="prefetch" href="/blog/assets/js/7.3d138dc9.js"><link rel="prefetch" href="/blog/assets/js/8.aa97b368.js"><link rel="prefetch" href="/blog/assets/js/9.7f246d30.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.56a09861.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">hh`s blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/article/JavaScript/QA-daily.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/resume.html" class="nav-link">
  Resume
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/article/JavaScript/QA-daily.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/resume.html" class="nav-link">
  Resume
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/article/JavaScript/QA-daily.html" class="sidebar-link">æ¯æ—¥ä¸€é¢˜  ğŸ’Œ</a></li><li><a href="/blog/article/JavaScript/QA-advanced.html" aria-current="page" class="active sidebar-link">å‰ç«¯è¿›é˜¶é—®é¢˜ ğŸ’¥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/JavaScript/QA-advanced.html#å‰ç«¯è¿›é˜¶é—®é¢˜" class="sidebar-link">å‰ç«¯è¿›é˜¶é—®é¢˜ ğŸ’¥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/JavaScript/QA-advanced.html#_1-newçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="sidebar-link">1. newçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/article/JavaScript/QA-advanced.html#_2-å¦‚ä½•åˆ¤æ–­thisçš„æŒ‡å‘ï¼Ÿ" class="sidebar-link">2. å¦‚ä½•åˆ¤æ–­thisçš„æŒ‡å‘ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/article/JavaScript/QA-advanced.html#_3-æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ" class="sidebar-link">3. æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/article/JavaScript/QA-advanced.html#_4-call-apply-çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="sidebar-link">4. call/apply çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/article/JavaScript/QA-advanced.html#_5-å¦‚ä½•è®©-a-1-a-2-a-3-çš„å€¼ä¸ºtrueï¼Ÿ" class="sidebar-link">5. å¦‚ä½•è®© (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) çš„å€¼ä¸ºtrueï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/blog/article/JavaScript/QA-advanced.html#_6-ä»€ä¹ˆæ˜¯bfcï¼Ÿbfcçš„å¸ƒå±€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºbfcï¼Ÿ" class="sidebar-link">6. ä»€ä¹ˆæ˜¯BFCï¼ŸBFCçš„å¸ƒå±€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºBFCï¼Ÿ</a></li></ul></li></ul></li><li><a href="/blog/article/Other/curring.html" class="sidebar-link">å‡½æ•°æŸ¯é‡ŒåŒ– ğŸŒ</a></li><li><a href="/blog/article/JavaScript/Class.html" class="sidebar-link">Class ğŸŒ¿</a></li><li><a href="/blog/article/JavaScript/weakMap.html" class="sidebar-link">WeakMap ğŸ‘ˆ</a></li><li><a href="/blog/article/JavaScript/clipboard.html" class="sidebar-link">åŸç”ŸJSå®ç°ç²˜è´´åˆ°å‰ªè´´æ¿</a></li><li><a href="/blog/article/JavaScript/browser.html" class="sidebar-link">æµè§ˆå™¨å†…æ ¸ä¸JSå¼•æ“</a></li><li><a href="/blog/article/JavaScript/webpack/webpack-s1.html" class="sidebar-link">webpacké…ç½®å·¥ç¨‹å¸ˆâ€”åŸºç¡€</a></li><li><a href="/blog/article/JavaScript/webpack/webpack-s2.html" class="sidebar-link">webpacké…ç½®å·¥ç¨‹å¸ˆâ€”å®è·µ</a></li><li><a href="/blog/article/JavaScript/reconstruction/reconstruction.html" class="sidebar-link">é¡¹ç›®é‡æ„ä¼˜åŒ–äº†è§£ä¸€ä¸‹</a></li><li><a href="/blog/article/JavaScript/api-rules.html" class="sidebar-link">å‰åç«¯æ¥å£è§„èŒƒ</a></li><li><a href="/blog/article/JavaScript/token.html" class="sidebar-link">èŠèŠtokené‚£äº›äº‹</a></li><li><a href="/blog/article/JavaScript/js-tricks.html" class="sidebar-link">JavaScriptä¸­å¸¸ç”¨çš„å°æŠ€å·§</a></li><li><a href="/blog/article/JavaScript/yarn-vs-npm.html" class="sidebar-link">yarn vs npm</a></li><li><a href="/blog/article/js/http-cache.html" class="sidebar-link">httpç¼“å­˜</a></li><li><a href="/blog/article/js/event-loop.html" class="sidebar-link">äº‹ä»¶å¾ªç¯æœºåˆ¶</a></li><li><a href="/blog/article/js/complexity.html" class="sidebar-link">æ—¶é—´å¤æ‚åº¦ &amp;&amp; ç©ºé—´å¤æ‚åº¦</a></li><li><a href="/blog/article/js/vue-react.html" class="sidebar-link">Vue vs React</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="å‰ç«¯è¿›é˜¶é—®é¢˜"><a href="#å‰ç«¯è¿›é˜¶é—®é¢˜" class="header-anchor">#</a> å‰ç«¯è¿›é˜¶é—®é¢˜ ğŸ’¥</h2> <p>ä¸å®šæœŸæ›´æ–°çš„å‰ç«¯è¿›é˜¶é—®é¢˜ï¼Œåˆ·æ–°ä½ çš„çŸ¥è¯†ï¼Œæˆ–è€…å¸®åŠ©ä½ çš„ coding é¢è¯•ï¼</p> <h3 id="_1-newçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#_1-newçš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="header-anchor">#</a> 1. <code>new</code>çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3> <br> <details><summary><b>æŸ¥çœ‹è§£æ</b></summary> <p></p><p><code>new</code>çš„è¿‡ç¨‹åˆ†ä¸ºå››æ­¥ï¼š</p> <ol><li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</li> <li>å»ºç«‹åŸå‹è¿æ¥(<code>__propto__</code>)</li> <li>æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œè®©æ„é€ å‡½æ•°ä¸­çš„thisæŒ‡å‘å®ä¾‹ï¼Œå®ä¾‹ç»§æ‰¿æ„é€ å‡½æ•°çš„å±æ€§æˆ–æ–¹æ³•</li> <li>åˆ¤æ–­æ„é€ å‡½æ•°çš„è¿”å›å€¼ï¼Œç¡®å®šè¿”å›å¯¹è±¡</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">imitateNew</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span>
    <span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    instance<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>instance<span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token regex">/object|function/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> instance
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ä½¿ç”¨ä¸Šè¿°æ¨¡ä»¿çš„<code>new</code>æ–¹å¼ï¼Œæµ‹è¯•å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lazy'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">smile</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">':)'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token function">imitateNew</span><span class="token punctuation">(</span>Super<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 'lazy'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 10</span>
instance<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'hi'</span>
instance<span class="token punctuation">.</span><span class="token function">smile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//':)'</span>

instance<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Super <span class="token comment">// true</span>
instance<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'constructor'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'constructor'</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p></p></details> <hr> <h3 id="_2-å¦‚ä½•åˆ¤æ–­thisçš„æŒ‡å‘ï¼Ÿ"><a href="#_2-å¦‚ä½•åˆ¤æ–­thisçš„æŒ‡å‘ï¼Ÿ" class="header-anchor">#</a> 2. å¦‚ä½•åˆ¤æ–­<code>this</code>çš„æŒ‡å‘ï¼Ÿ</h3> <br> <details><summary><b>æŸ¥çœ‹è§£æ</b></summary> <p>å¤§è‡´åˆ†ä¸ºä»¥ä¸‹äº”ç§æƒ…å†µï¼Œæ¯ç§æƒ…å†µä¸­æ˜¯å¦ä¸ºä¸¥æ ¼æ¨¡å¼<code>this</code>çš„æŒ‡å‘åˆå„æœ‰ä¸åŒç»“æœï¼š</p> <ol><li>å…¨å±€ç¯å¢ƒä¸­çš„<code>this</code></li> <li>é»˜è®¤ç»‘å®š</li> <li>éšå¼ç»‘å®šä¸æ˜¾å¼ç»‘å®š</li> <li>æ˜¯å¦ç®­å¤´å‡½æ•°</li> <li>ç±»ï¼æ„é€ å‡½æ•° <code>new</code></li></ol> <h4 id="_1-å…¨å±€ç¯å¢ƒä¸‹çš„this"><a href="#_1-å…¨å±€ç¯å¢ƒä¸‹çš„this" class="header-anchor">#</a> 1.å…¨å±€ç¯å¢ƒä¸‹çš„<code>this</code></h4> <table><thead><tr><th>åœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­</th> <th>ä¸¥æ ¼æ¨¡å¼</th> <th>éä¸¥æ ¼æ¨¡å¼</th></tr></thead> <tbody><tr><td>æµè§ˆå™¨ç¯å¢ƒ</td> <td><code>window</code></td> <td><code>window</code></td></tr> <tr><td>nodeç¯å¢ƒ</td> <td><code>{}</code></td> <td><code>{}</code></td></tr></tbody></table> <h4 id="_2-é»˜è®¤ç»‘å®š"><a href="#_2-é»˜è®¤ç»‘å®š" class="header-anchor">#</a> 2.é»˜è®¤ç»‘å®š</h4> <p>åœ¨ä¸èƒ½åº”ç”¨å…¶å®ƒç»‘å®šè§„åˆ™æ—¶ä½¿ç”¨çš„é»˜è®¤è§„åˆ™ï¼Œé€šå¸¸æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">18</span>
<span class="token keyword">function</span> <span class="token function">howOld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">howOld</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿è¡Œä¸Šè¿°ä»£ç ï¼Œæƒ…å†µå¦‚ä¸‹</p> <table><thead><tr><th>åœ¨å…¨å±€æ‰§è¡Œç¯å¢ƒä¸­</th> <th>ä¸¥æ ¼æ¨¡å¼</th> <th>éä¸¥æ ¼æ¨¡å¼</th></tr></thead> <tbody><tr><td>æµè§ˆå™¨ç¯å¢ƒ</td> <td>æŠ›å‡ºé”™è¯¯<code>TypeError</code></td> <td><code>18</code></td></tr> <tr><td>nodeç¯å¢ƒ</td> <td>æŠ›å‡ºé”™è¯¯<code>TypeError</code></td> <td><code>undefined</code></td></tr></tbody></table> <p>éä¸¥æ ¼æ¨¡å¼ä¸‹çš„nodeç¯å¢ƒæ‰“å°å‡º<code>undeifned</code>æ˜¯å› ä¸ºå…¨å±€<code>age</code>ä¸ä¼šæŒ‚è½½åœ¨<code>global</code>ä¸‹</p> <h4 id="_3-éšå¼ç»‘å®šä¸æ˜¾å¼ç»‘å®š"><a href="#_3-éšå¼ç»‘å®šä¸æ˜¾å¼ç»‘å®š" class="header-anchor">#</a> 3.éšå¼ç»‘å®šä¸æ˜¾å¼ç»‘å®š</h4> <p>éšå¼ç»‘å®šå¾ˆå¸¸è§ï¼Œå³å‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå³è°ƒç”¨ä½ç½®ä¸Šå­˜åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå…¸å‹çš„éšå¼è°ƒç”¨ä¸º: <code>xxx.fn()</code></p> <p>è€Œé€šè¿‡<code>apply</code>, <code>call</code>, <code>bind</code>æ–¹æ³•åˆ™æ˜¯æ˜¾å¼ç»‘å®šå¯¹è±¡çš„ï¼Œæ­¤æ—¶<code>this</code>æŒ‡å‘çš„å°±æ˜¯è¯¥å¯¹è±¡</p> <p>å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> age <span class="token operator">=</span> <span class="token number">16</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    howOld
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">howOld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
person<span class="token punctuation">.</span><span class="token function">howOld</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 18  éšå¼ç»‘å®šï¼Œè°è°ƒç”¨æŒ‡å‘è°</span>
<span class="token keyword">var</span> sayAge <span class="token operator">=</span> person<span class="token punctuation">.</span>howOld
<span class="token keyword">var</span> beautofulPerson <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">17</span>
<span class="token punctuation">}</span>
<span class="token function">sayAge</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>beautofulPerson<span class="token punctuation">)</span> <span class="token comment">// 17</span>
<span class="token function">sayAge</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>beautofulPerson<span class="token punctuation">)</span> <span class="token comment">// 17</span>
<span class="token function">sayAge</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>beautofulPerson<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 17</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœ <code>call</code>,<code>apply</code> æˆ–è€… <code>bind</code> ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å€¼æ˜¯ <code>undefined</code> æˆ–è€… <code>null</code>,</p> <p>ä¸¥æ ¼æ¨¡å¼ä¸‹ <code>this</code> çš„å€¼ä¸ºä¼ å…¥çš„å€¼ <code>null</code> /<code>undefined</code>, <code>sayAge.call(null)</code>å°†æŠ›å‡ºé”™è¯¯</p> <p>éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå®é™…åº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™ï¼Œ<code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡(nodeç¯å¢ƒä¸º<code>global</code>ï¼Œæµè§ˆå™¨ç¯å¢ƒä¸º<code>window</code>)ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">sayAge</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="_4-ç®­å¤´å‡½æ•°"><a href="#_4-ç®­å¤´å‡½æ•°" class="header-anchor">#</a> 4.ç®­å¤´å‡½æ•°</h4> <p>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œç»§æ‰¿å¤–å±‚ä¸Šä¸‹æ–‡ç»‘å®šçš„this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token function-variable function">howOld</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> sayAge <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">howOld</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_5-ç±»ï¼æ„é€ å‡½æ•°-new"><a href="#_5-ç±»ï¼æ„é€ å‡½æ•°-new" class="header-anchor">#</a> 5. ç±»ï¼æ„é€ å‡½æ•° <code>new</code></h4> <p>åœ¨ç±»å½“ä¸­ï¼Œé™æ€æ–¹æ³•ä¸­çš„<code>this</code>æŒ‡å‘çš„æ˜¯å½“å‰ç±»ï¼Œæ™®é€šæ–¹æ³•ä¸­çš„<code>this</code>æŒ‡å‘çš„æ˜¯å®ä¾‹å¯¹è±¡</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">baz</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">sayAge</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>é€šè¿‡æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹æ—¶ï¼Œæ„é€ å‡½æ•°çš„<code>this</code>æ˜¯å¦æŒ‡å‘å®ä¾‹æœ¬èº«å–å†³çš„å…¶è¿”å›çš„æ˜¯å¦ä¸º<code>function</code>æˆ–<code>object</code></p> <p>æ„é€ å‡½æ•°è¿”å›çš„ä¸ä¸º<code>function</code>æˆ–<code>object</code>ï¼Œé‚£ä¹ˆ<code>this</code>æŒ‡å‘çš„æ˜¯å®ä¾‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
<span class="token punctuation">}</span>
<span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ„é€ å‡½æ•°è¿”å›<code>function</code>æˆ–<code>object</code>ï¼Œé‚£ä¹ˆ<code>this</code>æŒ‡å‘çš„æ˜¯è¿”å›çš„å¯¹è±¡ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">return</span> <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'lazy'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// lazy</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></details> <hr> <h3 id="_3-æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ"><a href="#_3-æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ" class="header-anchor">#</a> 3. æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•å®ç°ä¸€ä¸ªæ·±æ‹·è´ï¼Ÿ</h3> <br> <details><summary><b>æŸ¥çœ‹è§£æ</b></summary> <br>
æµ…æ‹·è´å’Œæ·±æ‹·è´æ˜¯é’ˆå¯¹å¤æ‚æ•°æ®ç±»å‹æ¥è¯´çš„ï¼Œæµ…æ‹·è´åªæ‹·è´ä¸€å±‚ï¼Œè€Œæ·±æ‹·è´æ˜¯å±‚å±‚æ‹·è´ã€‚
<p>æµ…æ‹·è´</p> <blockquote><p>æµ…æ‹·è´æ˜¯ä¼šå°†å¯¹è±¡çš„æ¯ä¸ªå±æ€§è¿›è¡Œä¾æ¬¡å¤åˆ¶ï¼Œä½†æ˜¯å½“å¯¹è±¡çš„å±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹æ—¶ï¼Œå®è´¨å¤åˆ¶çš„æ˜¯å…¶å¼•ç”¨ï¼Œå½“å¼•ç”¨æŒ‡å‘çš„å€¼æ”¹å˜æ—¶ä¹Ÿä¼šè·Ÿç€å˜åŒ–ã€‚</p></blockquote> <p>æ·±æ‹·è´</p> <blockquote><p>æ·±æ‹·è´å¤åˆ¶å˜é‡å€¼ï¼Œå¯¹äºéåŸºæœ¬ç±»å‹çš„å˜é‡ï¼Œåˆ™é€’å½’è‡³åŸºæœ¬ç±»å‹å˜é‡åï¼Œå†å¤åˆ¶ã€‚ æ·±æ‹·è´åçš„å¯¹è±¡ä¸åŸæ¥çš„å¯¹è±¡æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œäº’ä¸å½±å“ï¼Œå¯¹ä¸€ä¸ªå¯¹è±¡çš„ä¿®æ”¹å¹¶ä¸ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡ã€‚</p></blockquote> <p><b>å®ç°æµ…æ‹·è´ï¼š</b></p> <p>å¯ä»¥ç”¨<code>for in</code>ã€ <code>Object.assign</code>ã€ æ‰©å±•è¿ç®—ç¬¦ <code>...</code> ã€<code>Array.prototype.slice()</code>ã€<code>Array.prototype.concat()</code> ç­‰ï¼Œä¾‹å¦‚:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'lazy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    feature<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'beauty'</span><span class="token punctuation">,</span> <span class="token string">'smart'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>
<span class="token keyword">var</span> obj3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>obj<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'chen'</span>
obj<span class="token punctuation">.</span>feature<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'rich'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;chen&quot;, age: 16, feature: [&quot;beauty&quot;, &quot;smart&quot;, &quot;rich&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;lazy&quot;, age: 16, feature: [&quot;beauty&quot;, &quot;smart&quot;, &quot;rich&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj3<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;lazy&quot;, age: 16, feature: [&quot;beauty&quot;, &quot;smart&quot;, &quot;rich&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å¯ä»¥çœ‹å‡ºæµ…æ‹·è´åªæœ€ç¬¬ä¸€å±‚å±æ€§è¿›è¡Œäº†æ‹·è´ï¼Œå½“ç¬¬ä¸€å±‚çš„å±æ€§å€¼æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æ—¶ï¼Œæ–°çš„å¯¹è±¡å’ŒåŸå¯¹è±¡äº’ä¸å½±å“ï¼Œä½†æ˜¯å¦‚æœç¬¬ä¸€å±‚çš„å±æ€§å€¼æ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆæ–°å¯¹è±¡å’ŒåŸå¯¹è±¡çš„å±æ€§å€¼å…¶æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åœ°å€ã€‚</p> <p><b>å®ç°æ·±æ‹·è´ï¼š</b></p> <ol><li>ç®€æ˜“ç‰ˆçš„æ·±æ‹·è´å®ç°å¦‚ä¸‹: <code>JSON.parse(JSON.stringify(obj))</code>,ä½†è¯¥æ–¹æ³•æœ‰è¯¸å¤šç¼ºé™·</li> <li>å®ç°ä¸€ä¸ª<code>deepClone</code>å‡½æ•°</li></ol> <p>æ–¹æ³•ä¸€ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'lazy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    feature<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'beauty'</span><span class="token punctuation">,</span> <span class="token string">'smart'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    time<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    myReg<span class="token operator">:</span> <span class="token regex">/\d{5}/</span><span class="token punctuation">,</span>
    flag<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    boyfriend<span class="token operator">:</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'chen'</span>
obj<span class="token punctuation">.</span>feature<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'rich'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// { age: 16, boyfriend: undefined, feature: [&quot;beauty&quot;, &quot;smart&quot;, &quot;rich&quot;], flag: Symbol(foo), myReg: /\d{5}/, name: &quot;chen&quot;, sayHi: Æ’ (), time: Mon Jul 22 2019 17:00:07 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´) }</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;lazy&quot;, age: 16, feature: [&quot;beauty&quot;, &quot;smart&quot;], time: &quot;2019-07-22T09:00:07.099Z&quot;, myReg:  {} }</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ç»¼ä¸Šå¯ä»¥çœ‹å‡ºè¯¥æ–¹æ³•æœ‰å¦‚ä¸‹ç¼ºé™·ï¼š</p> <ol><li>å¯¹è±¡çš„å±æ€§å€¼æ˜¯å‡½æ•°æ—¶ï¼Œæ— æ³•æ‹·è´</li> <li>åŸå‹é“¾ä¸Šçš„å±æ€§æ— æ³•è¢«æ‹·è´</li> <li>ä¸èƒ½æ­£ç¡®çš„å¤„ç† <code>Date</code> ç±»å‹çš„æ•°æ®</li> <li>ä¸èƒ½å¤„ç† <code>RegExp</code></li> <li>ä¼šå¿½ç•¥ <code>symbol</code></li> <li>ä¼šå¿½ç•¥ <code>undefined</code></li></ol> <p>æ–¹æ³•äºŒï¼šå®ç°ä¸€ä¸ª<code>deepClone</code>å‡½æ•°, æ€è·¯å¦‚ä¸‹ï¼š</p> <ol><li>å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œç›´æ¥è¿”å›</li> <li>å¦‚æœæ˜¯ <code>RegExp</code> æˆ–è€… <code>Date</code> ç±»å‹ï¼Œè¿”å›å¯¹åº”ç±»å‹</li> <li>å¦‚æœæ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼Œé€’å½’ã€‚</li> <li>è€ƒè™‘å¾ªç¯å¼•ç”¨çš„é—®é¢˜</li></ol> <p>ä»¥ä¸‹æ˜¯ä¸€ç§ç®€æ˜“å®ç°æ€è·¯ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> obj
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span>
    hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> t<span class="token punctuation">)</span>
    <span class="token comment">// for...inè¯­å¥ä»¥ä»»æ„é¡ºåºéå†ä¸€ä¸ªå¯¹è±¡è‡ªæœ‰çš„ã€ç»§æ‰¿çš„ã€å¯æšä¸¾çš„ã€éSymbolçš„å±æ€§ã€‚å¯¹äºæ¯ä¸ªä¸åŒçš„å±æ€§ï¼Œè¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            t<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> t
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'lazy'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">16</span><span class="token punctuation">,</span>
    feature<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'beauty'</span><span class="token punctuation">,</span> <span class="token string">'smart'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    time<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    myReg<span class="token operator">:</span> <span class="token regex">/\d{5}/</span><span class="token punctuation">,</span>
    flag<span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    boyfriend<span class="token operator">:</span> <span class="token keyword">undefined</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'chen'</span>
obj<span class="token punctuation">.</span>feature<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'rich'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p><a href="/blog/article/JavaScript/weakmap.html">æ›´å¤šå…³äºWeakMap</a></p></details> <hr> <h3 id="_4-call-apply-çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#_4-call-apply-çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="header-anchor">#</a> 4. <code>call</code>/<code>apply</code> çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3> <br> <details><summary><b>æŸ¥çœ‹è§£æ</b></summary> <p>
`call` å’Œ `apply` çš„åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯æ”¹å˜ this çš„æ‰§è¡Œï¼Œå¹¶ç«‹å³æ‰§è¡Œå‡½æ•°ã€‚åŒºåˆ«åœ¨äºä¼ å‚æ–¹å¼ä¸åŒã€‚
<ul><li><code>func.call(thisArg, arg1, arg2, ...)</code>ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ this æŒ‡å‘çš„å¯¹è±¡ï¼Œå…¶å®ƒå‚æ•°ä¾æ¬¡ä¼ å…¥ã€‚</li> <li><code>func.apply(thisArg, [argsArray])</code>ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ this æŒ‡å‘çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°ç»„æˆ–ç±»æ•°ç»„ã€‚</li></ul></p><p>ä¸€èµ·æ€è€ƒä¸€ä¸‹ï¼Œå¦‚ä½•æ¨¡æ‹Ÿå®ç° <code>call</code> ï¼Ÿ
é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå‡½æ•°éƒ½å¯ä»¥è°ƒç”¨ <code>call</code>ï¼Œè¯´æ˜ <code>call</code> æ˜¯å‡½æ•°åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œæ‰€æœ‰çš„å®ä¾‹éƒ½å¯ä»¥è°ƒç”¨ã€‚å³: <code>Function.prototype.call</code>ã€‚</p> <p>åœ¨ <code>call</code> æ–¹æ³•ä¸­è·å–è°ƒç”¨<code>call</code>()å‡½æ•°
å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ²¡æœ‰ä¼ å…¥ï¼Œé‚£ä¹ˆé»˜è®¤æŒ‡å‘ window / global(éä¸¥æ ¼æ¨¡å¼)
ä¼ å…¥ <code>call</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ this æŒ‡å‘çš„å¯¹è±¡ï¼Œæ ¹æ®éšå¼ç»‘å®šçš„è§„åˆ™ï¼Œæˆ‘ä»¬çŸ¥é“ <code>obj.foo()</code>, <code>foo()</code> ä¸­çš„ this æŒ‡å‘ obj;å› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·è°ƒç”¨å‡½æ•° <code>thisArgs.func(...args)</code>
è¿”å›æ‰§è¡Œç»“æœ</p> <p>call</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">imitateCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">[</span>thisArg<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>thisArg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        thisArg <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> <span class="token string">'global'</span> <span class="token operator">:</span> window
    <span class="token punctuation">}</span>
    thisArg<span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> thisArg<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token keyword">delete</span> thisArg<span class="token punctuation">.</span>func
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'lazy'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
<span class="token punctuation">}</span>
test<span class="token punctuation">.</span><span class="token function">imitateCall</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">'male'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;lazy&quot;, age: 12, sex: &quot;male&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>apply</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">imitateApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thisArg<span class="token punctuation">,</span> rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>thisArg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        thisArg <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> <span class="token string">'global'</span> <span class="token operator">:</span> window
    <span class="token punctuation">}</span>
    thisArg<span class="token punctuation">.</span>func <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> thisArg<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        result <span class="token operator">=</span> thisArg<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">delete</span> thisArg<span class="token punctuation">.</span>func
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'lazy'</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">test</span> <span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age
    <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex
<span class="token punctuation">}</span>
test<span class="token punctuation">.</span><span class="token function">imitateApply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'16'</span><span class="token punctuation">,</span> <span class="token string">'male'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// {name: &quot;lazy&quot;, age: 12}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p></p></details> <h3 id="_5-å¦‚ä½•è®©-a-1-a-2-a-3-çš„å€¼ä¸ºtrueï¼Ÿ"><a href="#_5-å¦‚ä½•è®©-a-1-a-2-a-3-çš„å€¼ä¸ºtrueï¼Ÿ" class="header-anchor">#</a> 5. å¦‚ä½•è®© <code>(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3)</code> çš„å€¼ä¸ºtrueï¼Ÿ</h3> <br> <details><summary><b>æŸ¥çœ‹è§£æ</b></summary> <p></p><p>æ“ä½œç¬¦<code>==</code>åœ¨å·¦å³æ•°æ®ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œä¼šå…ˆè¿›è¡Œéšå¼è½¬æ¢ï¼Œæˆ‘ä»¬å¯åˆ©ç”¨è¿™ä¸€ç‚¹æ¥å®ç°</p> <p><code>a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3</code> ï¼Œè¿™æ„å‘³ç€<code>a</code>ä¸å¯èƒ½æ˜¯åŸºæœ¬æ•°æ®ç±»å‹, é‚£ä¹ˆ <code>a</code> å°±æ˜¯ <code>object</code>ï¼Œå›å¿†ä¸€ä¸‹ï¼Œ<code>Object</code> è½¬æ¢ä¸ºåŸå§‹å€¼ä¼šè°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼Ÿ</p> <ul><li>å¦‚æœéƒ¨ç½²äº† <code>[Symbol.toPrimitive]</code> æ¥å£ï¼Œé‚£ä¹ˆè°ƒç”¨æ­¤æ¥å£ï¼Œè‹¥è¿”å›çš„ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒæŠ›å‡ºé”™è¯¯ã€‚</li> <li>å¦‚æœæ²¡æœ‰éƒ¨ç½² <code>[Symbol.toPrimitive]</code> æ¥å£ï¼Œé‚£ä¹ˆæ ¹æ®è¦è½¬æ¢çš„ç±»å‹ï¼Œè°ƒç”¨ <code>valueOf</code> æˆ–è€… <code>toString</code></li></ul> <ol><li>éƒ¨ç½²<code>[Symbol.toPrimitive]</code> <code>Symbol.toPrimitive</code> æ˜¯ä¸€ä¸ªå†…ç½®çš„ <code>Symbol</code> å€¼ï¼Œå®ƒæ˜¯ä½œä¸ºå¯¹è±¡çš„å‡½æ•°å€¼å±æ€§å­˜åœ¨çš„ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è½¬æ¢ä¸ºå¯¹åº”çš„åŸå§‹å€¼æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">hint</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token comment">// é€šè¿‡é—­åŒ…ï¼Œiä¸ä¼šè¢«å›æ”¶</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> i<span class="token operator">++</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="2"><li><code>Array</code>è½¬æ¢ä¸ºåŸå§‹å€¼
æ•°ç»„çš„ <code>toString</code> æ–¹æ³•é»˜è®¤è°ƒç”¨æ•°ç»„çš„ <code>join</code> æ–¹æ³•ï¼š</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 1,2,3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æˆ‘ä»¬å¯ä»¥é‡å†™<code>join</code>æ–¹æ³•</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span>join <span class="token operator">=</span> arr<span class="token punctuation">.</span>shift

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li>æ•°æ®åŠ«æŒï¼ˆ<code>Proxy</code>ï¼‰
<code>Proxy(target, handler)</code> å¯¹è±¡ç”¨äºå®šä¹‰åŸºæœ¬æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼ˆå¦‚å±æ€§æŸ¥æ‰¾ï¼Œèµ‹å€¼ï¼Œæšä¸¾ï¼Œå‡½æ•°è°ƒç”¨ç­‰ï¼‰ã€‚</li></ol> <p><code>Proxy</code>å¯¹è±¡æ‰§è¡Œéšå¼è½¬æ¢æ—¶è°ƒç”¨çš„ <code>valueOf</code>/<code>toString</code>å®è´¨éƒ½æ˜¯è°ƒç”¨çš„<code>handler</code>ä¸­çš„<code>get</code>æ–¹æ³•, å¦‚æœæ²¡æœ‰<code>get</code>æ–¹æ³•ï¼Œåˆ™è°ƒç”¨ç»§æ‰¿è‡ª<code>Object</code>çš„.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    i<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token operator">++</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener noreferrer">æ›´å¤šå…³äºProxy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></details><p></p> <hr> <h3 id="_6-ä»€ä¹ˆæ˜¯bfcï¼Ÿbfcçš„å¸ƒå±€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºbfcï¼Ÿ"><a href="#_6-ä»€ä¹ˆæ˜¯bfcï¼Ÿbfcçš„å¸ƒå±€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºbfcï¼Ÿ" class="header-anchor">#</a> 6. ä»€ä¹ˆæ˜¯BFCï¼ŸBFCçš„å¸ƒå±€è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºBFCï¼Ÿ</h3> <br> <details><summary><b>æŸ¥çœ‹è§£æ</b></summary> <p>Box æ˜¯ CSS å¸ƒå±€çš„å¯¹è±¡å’ŒåŸºæœ¬å•ä½ï¼Œé¡µé¢æ˜¯ç”±è‹¥å¹²ä¸ªBoxç»„æˆçš„ã€‚
å…ƒç´ çš„ç±»å‹ å’Œ <code>display</code> å±æ€§ï¼Œå†³å®šäº†è¿™ä¸ª Box çš„ç±»å‹ã€‚ä¸åŒç±»å‹çš„ Box ä¼šå‚ä¸ä¸åŒçš„ Formatting Contextã€‚</p> <blockquote><p>Formatting Context æ˜¯é¡µé¢çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—æ¸²æŸ“è§„åˆ™ï¼Œå†³å®šäº†å…¶å­å…ƒç´ å°†å¦‚ä½•å®šä½ï¼Œä»¥åŠå’Œå…¶å®ƒå…ƒç´ çš„å…³ç³»å’Œç›¸äº’ä½œç”¨ã€‚</p> <p>Formatting Context æœ‰ BFC (Block formatting context)ï¼ŒIFC (Inline formatting context)ï¼ŒFFC (Flex formatting context) å’Œ GFC (Grid formatting context)å››ç§ã€‚å…¶ä¸­FFC å’Œ GFC ä¸º CC3 ä¸­æ–°å¢ã€‚</p></blockquote> <p>BFCå¸ƒå±€è§„åˆ™</p> <ul><li>BFCå†…ï¼Œç›’å­ä¾æ¬¡å‚ç›´æ’åˆ—ã€‚</li> <li>BFCå†…ï¼Œä¸¤ä¸ªç›’å­çš„å‚ç›´è·ç¦»ç”± margin å±æ€§å†³å®šã€‚å±äºåŒä¸€ä¸ªBFCçš„ä¸¤ä¸ªç›¸é‚»Boxçš„marginä¼šå‘ç”Ÿé‡å ã€ç¬¦åˆåˆå¹¶åŸåˆ™çš„marginåˆå¹¶åæ˜¯ä½¿ç”¨å¤§çš„marginã€‘</li> <li>BFCå†…ï¼Œæ¯ä¸ªç›’å­çš„å·¦å¤–è¾¹ç¼˜æ¥è§¦å†…éƒ¨ç›’å­çš„å·¦è¾¹ç¼˜ï¼ˆå¯¹äºä»å³åˆ°å·¦çš„æ ¼å¼ï¼Œå³è¾¹ç¼˜æ¥è§¦ï¼‰ã€‚å³ä½¿åœ¨å­˜åœ¨æµ®åŠ¨çš„æƒ…å†µä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚é™¤éåˆ›å»ºæ–°çš„BFCã€‚</li> <li>BFCçš„åŒºåŸŸä¸ä¼šä¸float boxé‡å ã€‚</li> <li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ã€‚åä¹‹ä¹Ÿå¦‚æ­¤ã€‚</li> <li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ã€‚</li></ul> <p>å¦‚ä½•åˆ›å»ºBFC</p> <ul><li>æ ¹å…ƒç´ </li> <li>æµ®åŠ¨å…ƒç´ ï¼ˆfloat å±æ€§ä¸ä¸º noneï¼‰</li> <li>position ä¸º absolute æˆ– fixed</li> <li>overflow ä¸ä¸º visible çš„å—å…ƒç´ </li> <li>display ä¸º inline-block, table-cell, table-caption</li></ul> <p>BFC çš„åº”ç”¨</p> <p>é˜²æ­¢ margin  é‡å  (åŒä¸€ä¸ªBFCå†…çš„ä¸¤ä¸ªä¸¤ä¸ªç›¸é‚»Boxçš„ margin ä¼šå‘ç”Ÿé‡å ï¼Œè§¦å‘ç”Ÿæˆä¸¤ä¸ªBFCï¼Œå³ä¸ä¼šé‡å )
æ¸…é™¤å†…éƒ¨æµ®åŠ¨ (åˆ›å»ºä¸€ä¸ªæ–°çš„ BFCï¼Œå› ä¸ºæ ¹æ® BFC çš„è§„åˆ™ï¼Œè®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—)
è‡ªé€‚åº”å¤šæ å¸ƒå±€ (BFCçš„åŒºåŸŸä¸ä¼šä¸float boxé‡å ã€‚å› æ­¤ï¼Œå¯ä»¥è§¦å‘ç”Ÿæˆä¸€ä¸ªæ–°çš„BFC)</p></details> <hr> <p>é—®é¢˜æ¥æºå‚è€ƒä½†ä¸é™äºä»¥ä¸‹ï¼š</p> <p><a href="https://juejin.im/post/5d124a12f265da1b9163a28d" target="_blank" rel="noopener noreferrer">è¿™å„¿æœ‰20é“å¤§å‚é¢è¯•é¢˜ç­‰ä½ æŸ¥æ”¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/article/JavaScript/QA-daily.html" class="prev">
        æ¯æ—¥ä¸€é¢˜  ğŸ’Œ
      </a></span> <span class="next"><a href="/blog/article/Other/curring.html">
        å‡½æ•°æŸ¯é‡ŒåŒ– ğŸŒ
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.c630634d.js" defer></script><script src="/blog/assets/js/2.0a87b090.js" defer></script><script src="/blog/assets/js/11.6ddcf7ce.js" defer></script>
  </body>
</html>
